{"version":3,"sources":["../../src/elements/Element.js"],"names":["Element","constructor","source","name","port","isotopes","status","buildAndDeploy","build","createService","console","log","toString"],"mappings":";;;;;;AAAA;;;;;;AAEe,MAAMA,OAAN,CAAc;AAC3BC,cAAYC,MAAZ,EAAoBC,IAApB,EAA0B;AACxB,SAAKD,MAAL,GAAcA,MAAd;AACA,SAAKC,IAAL,GAAYA,IAAZ;AACA,SAAKC,IAAL,GAAY,IAAZ;AACA,SAAKC,QAAL,GAAgB,EAAhB;AACA,SAAKC,MAAL,GAAc,QAAd;AACD;;AAED,QAAMC,cAAN,GAAuB;AACrB,UAAM,KAAKC,KAAL,EAAN;AACA,UAAM,KAAKC,aAAL,EAAN;AACA;;AAEA,SAAKH,MAAL,GAAc,UAAd;AACD;;AAED,QAAME,KAAN,GAAc;AACZ,SAAKF,MAAL,GAAc,UAAd;AACA;AACAI,YAAQC,GAAR,CAAY,YAAZ,EAA0B,KAAKR,IAA/B;AACAO,YAAQC,GAAR,CACE,CAAC,MAAM,sBACL,OADK,EAEJ,0BAAyB,KAAKR,IAAK,EAF/B,EAGL,KAAKD,MAHA,CAAP,EAIGU,QAJH,CAIY,OAJZ,CADF;AAOAF,YAAQC,GAAR,CACE,CAAC,MAAM,sBAAO,MAAP,EAAgB,uBAAsB,KAAKR,IAAK,EAAhD,CAAP,EAA2DS,QAA3D,CACE,OADF,CADF;AAKD;;AAED,QAAMH,aAAN,GAAsB;AACpB,SAAKH,MAAL,GAAc,WAAd;AACA,UAAM,sBACJ,SADI,EAEJ,QAFI,EAGJ,QAHI,EAIJ,KAAKH,IAJD,EAKH,uBAAsB,KAAKA,IAAK,EAL7B,CAAN;AAOD;AA5C0B;kBAARH,O","file":"Element.js","sourcesContent":["import docker from '../docker'\n\nexport default class Element {\n  constructor(source, name) {\n    this.source = source\n    this.name = name\n    this.port = null\n    this.isotopes = []\n    this.status = 'queued'\n  }\n\n  async buildAndDeploy() {\n    await this.build()\n    await this.createService()\n    // await this.createIsotope()\n\n    this.status = 'deployed'\n  }\n\n  async build() {\n    this.status = 'building'\n    // docker build ${source}\n    console.log('building: ', this.name)\n    console.log(\n      (await docker(\n        'build',\n        `-t=192.168.99.100:5000/${this.name}`,\n        this.source\n      )).toString('utf-8')\n    )\n    console.log(\n      (await docker('push', `192.168.99.100:5000/${this.name}`)).toString(\n        'utf-8'\n      )\n    )\n  }\n\n  async createService() {\n    this.status = 'deploying'\n    await docker(\n      'service',\n      'create',\n      '--name',\n      this.name,\n      `192.168.99.100:5000/${this.name}`\n    )\n  }\n}\n"]}